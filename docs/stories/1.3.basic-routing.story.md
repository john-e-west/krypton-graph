# Story 1.3: Basic Routing and Layout

## Status
Ready for Review

```text-block
REVIEW STATUS: APPROVED FOR DEVELOPMENT
Review Date: 2025-01-04
Reviewed By: Bob (Scrum Master)
Review Notes: Story provides complete routing and navigation requirements.
React Router v6 implementation is well-defined.
Responsive breakpoints clearly specified (mobile <768px, tablet 768-1279px, desktop ≥1280px).
shadcn-ui component usage is documented.
Error boundaries and loading states included.
Ready for parallel development with Story 1.2.
```

## Story
**As a** user,
**I want** consistent navigation and application structure,
**So that** I can easily access different features.

## Acceptance Criteria
1. React Router configured with routes for Dashboard, Documents, Ontologies, Graphs
2. App shell with header, sidebar navigation, and main content area
3. Responsive layout that works on desktop (1280px+) and tablets
4. Navigation highlights current active route
5. Loading states and error boundaries for each route
6. 404 page for unmatched routes

## Tasks / Subtasks
- [x] **Task 1: Install and Configure React Router** (AC: 1)
  - [x] Install react-router-dom v6
  - [x] Create router configuration in main.tsx
  - [x] Set up route definitions object
  - [x] Configure lazy loading for route components

- [x] **Task 2: Create App Shell Layout** (AC: 2)
  - [x] Create RootLayout component with header/sidebar/content areas
  - [x] Implement Header component with logo and user menu
  - [x] Create Sidebar navigation component
  - [x] Set up main content area with proper scrolling

- [x] **Task 3: Implement Navigation Components** (AC: 2, 4)
  - [x] Create NavigationMenu using shadcn-ui components
  - [x] Add navigation items for each main section
  - [x] Implement active route highlighting with NavLink
  - [x] Add navigation icons using lucide-react

- [x] **Task 4: Create Route Pages** (AC: 1)
  - [x] Create Dashboard page component
  - [x] Create Documents page component
  - [x] Create Ontologies page component  
  - [x] Create Graphs page component
  - [x] Create Settings page component

- [x] **Task 5: Add Responsive Design** (AC: 3)
  - [x] Implement mobile-first responsive layout
  - [x] Add collapsible sidebar for tablet views
  - [x] Ensure proper breakpoints (sm, md, lg, xl)
  - [x] Test on different screen sizes

- [x] **Task 6: Implement Loading and Error States** (AC: 5)
  - [x] Create LoadingSpinner component
  - [x] Implement React Suspense boundaries
  - [x] Create ErrorBoundary component
  - [x] Add error recovery UI

- [x] **Task 7: Create 404 Page** (AC: 6)
  - [x] Design 404 page with helpful navigation
  - [x] Add route catch-all for unmatched paths
  - [x] Include link back to dashboard
  - [x] Style with consistent theme

## Dev Notes

### Route Structure
Based on architecture.md Next.js hybrid structure (adapted for React Router):
```typescript
const routes = [
  { path: '/', element: <Dashboard /> },
  { path: '/ontologies', element: <Ontologies /> },
  { path: '/documents', element: <Documents /> },
  { path: '/graphs', element: <Graphs /> },
  { path: '/settings', element: <Settings /> },
  { path: '*', element: <NotFound /> }
]
```

### Layout Components Structure
```
src/components/layout/
├── RootLayout.tsx       # Main app shell
├── Header.tsx          # Top navigation bar
├── Sidebar.tsx         # Side navigation
├── NavigationMenu.tsx  # Navigation items
└── ContentArea.tsx     # Main content wrapper
```

### Navigation Items
```typescript
const navItems = [
  { icon: Home, label: 'Dashboard', path: '/' },
  { icon: FileText, label: 'Documents', path: '/documents' },
  { icon: Network, label: 'Ontologies', path: '/ontologies' },
  { icon: GitBranch, label: 'Graphs', path: '/graphs' },
  { icon: Settings, label: 'Settings', path: '/settings' }
]
```

### shadcn-ui Components to Use
- Navigation Menu
- Sheet (for mobile sidebar)
- Button
- ScrollArea
- Separator
- Avatar (for user menu)

### Responsive Breakpoints
- Mobile: < 768px (hidden sidebar, hamburger menu)
- Tablet: 768px - 1279px (collapsible sidebar)
- Desktop: ≥ 1280px (full sidebar always visible)

### Error Boundary Pattern
```typescript
class ErrorBoundary extends Component {
  componentDidCatch(error: Error, info: ErrorInfo) {
    // Log to error tracking service
    console.error('Route Error:', error, info)
  }
  
  render() {
    if (this.state.hasError) {
      return <ErrorFallback />
    }
    return this.props.children
  }
}
```

### Testing Standards
- Test all route navigations
- Verify active state highlighting
- Test responsive behavior at breakpoints
- Ensure error boundaries catch errors
- Test 404 page rendering

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-04 | 1.0 | Initial story creation | Bob (Scrum Master) |
| 2025-01-04 | 1.1 | Reviewed and approved for development | Bob (Scrum Master) |
| 2025-09-04 | 1.2 | Implemented all features | James (Developer) |

## Dev Agent Record
*To be populated during development*

### Agent Model Used
claude-opus-4-1-20250805

### Debug Log References
- No debug issues encountered

### Completion Notes List
- Successfully installed and configured React Router v6 with lazy loading
- Implemented responsive app shell with header, sidebar, and content areas
- Added mobile navigation using shadcn-ui Sheet component
- Created all required route pages with placeholder content
- Implemented error boundaries and loading states
- Fixed Tailwind CSS configuration for proper build
- All acceptance criteria met

### File List
- src/main.tsx (modified)
- src/router/routes.tsx (new)
- src/components/layout/RootLayout.tsx (new)
- src/components/layout/Header.tsx (new)
- src/components/layout/Sidebar.tsx (new)
- src/components/layout/ContentArea.tsx (new)
- src/components/layout/NavigationMenu.tsx (new)
- src/components/layout/MobileNav.tsx (new)
- src/components/LoadingSpinner.tsx (new)
- src/components/ErrorBoundary.tsx (new)
- src/pages/Dashboard.tsx (new)
- src/pages/Documents.tsx (new)
- src/pages/Ontologies.tsx (new)
- src/pages/Graphs.tsx (new)
- src/pages/Settings.tsx (new)
- src/pages/NotFound.tsx (new)
- tailwind.config.ts (modified)

## QA Results
*To be completed after implementation*

---
**Story Points**: 3 (1-2 days)
**Sprint**: Sprint 1
**Priority**: P0 - Must Have
**Dependencies**: Story 1.1 must be completed first